# ==============================================
# Pressograph Development Environment
# ==============================================
# This file contains development-specific settings
# Copy to .env.local and customize as needed
#
# For development with Docker/Podman Compose:
# - Database and Cache hostnames use service names (db, cache)
# - Ports are exposed to host for debugging
# - Less strict security settings

# ----------------------------------------------
# Application
# ----------------------------------------------
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_TELEMETRY_DISABLED=1

# Development debugging
DEBUG=pressograph:*
NODE_TLS_REJECT_UNAUTHORIZED=0

# ----------------------------------------------
# Database (PostgreSQL 18)
# ----------------------------------------------
# Using container service name 'db'
DATABASE_URL=postgresql://postgres:devpassword123@db:5432/pressograph

POSTGRES_USER=postgres
POSTGRES_PASSWORD=devpassword123
POSTGRES_DB=pressograph
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Connection pooling (relaxed for dev)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=5

# ----------------------------------------------
# Cache (Valkey 9)
# ----------------------------------------------
# Using container service name 'cache'
REDIS_URL=redis://cache:6379
REDIS_DB=0

# No password for dev environment
# VALKEY_PASSWORD=

# ----------------------------------------------
# Authentication (NextAuth.js)
# ----------------------------------------------
NEXTAUTH_URL=http://localhost:3000
# Development secret - REPLACE for production
NEXTAUTH_SECRET=dev-nextauth-secret-replace-in-production-32chars
NEXTAUTH_SESSION_MAX_AGE=86400  # 1 day for dev

# ----------------------------------------------
# Application Secrets (Dev placeholders)
# ----------------------------------------------
# These are DEV-ONLY placeholders
# Generate real secrets with: task secrets:generate
APP_SECRET=dev-app-secret-replace-in-production-32chars
JWT_SECRET=dev-jwt-secret-replace-in-production-32chars
API_SECRET_KEY=dev-api-secret-replace-in-production-32chars

# ----------------------------------------------
# Email / SMTP (Optional - Mailhog for dev)
# ----------------------------------------------
# Uncomment to use local Mailhog container
# SMTP_HOST=mailhog
# SMTP_PORT=1025
# SMTP_SECURE=false
# SMTP_USER=
# SMTP_PASSWORD=
# SMTP_FROM=dev@pressograph.local
# SMTP_FROM_NAME=Pressograph Dev

# ----------------------------------------------
# Object Storage (Optional - MinIO for dev)
# ----------------------------------------------
# Uncomment to use local MinIO container
# S3_BUCKET=pressograph-dev
# S3_REGION=us-east-1
# S3_ENDPOINT=http://minio:9000
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_PUBLIC_URL=http://localhost:9000/pressograph-dev

# ----------------------------------------------
# External Services (Dev - disabled by default)
# ----------------------------------------------
# ANALYTICS_ID=
# SENTRY_DSN=

# Local search (optional)
# MEILISEARCH_HOST=http://search:7700
# MEILISEARCH_API_KEY=dev-master-key

# ----------------------------------------------
# Feature Flags (Dev - all enabled)
# ----------------------------------------------
ENABLE_SIGNUP=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_TWO_FACTOR=false

# ----------------------------------------------
# Rate Limiting (Disabled for dev)
# ----------------------------------------------
RATE_LIMIT_ENABLED=false

# ----------------------------------------------
# CORS (Permissive for dev)
# ----------------------------------------------
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ----------------------------------------------
# Observability (OpenTelemetry + VictoriaMetrics)
# ----------------------------------------------
# Enable OpenTelemetry (set to 'true' to enable metrics/logs/traces)
OTEL_ENABLED=false

# VictoriaMetrics stack endpoints (use service names in Docker network)
VICTORIA_METRICS_URL=http://victoria-metrics:8428
VICTORIA_LOGS_URL=http://victoria-logs:9428
VICTORIA_TRACES_URL=http://victoria-traces:4318

# OpenTelemetry configuration
OTEL_SERVICE_NAME=pressograph-dev
OTEL_EXPORTER_OTLP_ENDPOINT=http://victoria-traces:4318

# Optional: Log level for OpenTelemetry
# OTEL_LOG_LEVEL=info

# ----------------------------------------------
# Uptrace (OpenTelemetry APM Platform)
# ----------------------------------------------
# Enable Uptrace integration
UPTRACE_ENABLED=false

# Uptrace endpoint
UPTRACE_URL=http://uptrace:14318

# Uptrace DSN (Data Source Name)
# Format: http://<project_token>@<host>:<port>/<project_id>
# Get from Uptrace UI after setup
UPTRACE_DSN=

# Enable dual export (send traces to both VictoriaTraces AND Uptrace)
OTEL_EXPORTER_OTLP_DUAL=false
