# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Pressograph Development Environment
# Compose Specification 2025 (Modern, Production-Ready)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Domain: https://dev-pressograph.infra4.dev
# Backend API: https://dev-pressograph.infra4.dev/api
#
# Features:
# - Hot reload Ğ´Ğ»Ñ frontend (Vite HMR) Ğ¸ backend (nodemon)
# - Traefik integration Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ HTTPS
# - Resource limits Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ OOM
# - Security hardening (no-new-privileges, cap drop)
# - Log rotation (10MB max, 3 files)
# - Healthchecks Ñ proper start_period
# - OCI labels Ğ´Ğ»Ñ metadata
# - SELinux compatible volume mounts (:z suffix)
#
# Usage:
#   cd /opt/projects/repositories/pressure-test-visualizer
#   make dev-compose
#   # Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ:
#   podman-compose -f deploy/compose/compose.dev.yaml --env-file deploy/compose/.env.dev up -d
#   podman-compose -f deploy/compose/compose.dev.yaml logs -f
#   podman-compose -f deploy/compose/compose.dev.yaml down
#
# Best Practices 2025:
#   âœ… Ğ‘ĞµĞ· version field (ÑƒÑÑ‚Ğ°Ñ€ĞµĞ» Ñ Docker Compose v1.27.0+)
#   âœ… Resource limits Ğ½Ğ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…
#   âœ… Log rotation Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ¸ÑĞºĞ°
#   âœ… Security options (no-new-privileges, cap_drop)
#   âœ… OCI standard labels
#   âœ… Healthchecks Ñ start_period
#   âœ… YAML anchors Ğ´Ğ»Ñ DRY
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# YAML Anchors - Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ (DRY principle)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞĞ±Ñ‰Ğ¸Ğµ OCI labels Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
x-common-labels: &common-labels
  org.opencontainers.image.vendor: "Pressograph"
  org.opencontainers.image.source: "https://github.com/your-org/pressure-test-visualizer"
  org.opencontainers.image.version: "${VERSION:-1.0.0-dev}"
  org.opencontainers.image.created: "${BUILD_DATE:-2025-10-29}"
  com.pressograph.environment: "development"

# Logging configuration Ñ rotation
x-common-logging: &common-logging
  driver: k8s-file
  options:
    max-size: "10m"
    max-file: "3"

# Security defaults
x-common-security: &common-security
  security_opt:
    - no-new-privileges:true
  cap_drop:
    - ALL

# Healthcheck defaults
x-healthcheck-defaults: &healthcheck-defaults
  interval: 30s
  timeout: 5s
  retries: 5

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Services
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PostgreSQL Database (Development)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  postgres:
    image: docker.io/library/postgres:18-trixie
    container_name: pressograph-dev-postgres
    restart: unless-stopped

    # Security context
    user: "999:999"  # postgres user Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ·Ğµ
    <<: *common-security
    cap_add:
      - CHOWN        # Ğ”Ğ»Ñ ÑĞ¼ĞµĞ½Ñ‹ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
      - FOWNER       # Ğ”Ğ»Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸
      - DAC_OVERRIDE # Ğ”Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼

    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.1'
          memory: 128M

    # Logging
    logging: *common-logging

    # Environment variables (Ğ¸Ğ· .env.dev)
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-pressograph_dev}
      POSTGRES_USER: ${POSTGRES_USER:-pressograph_dev}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_INITDB_ARGS: "-E UTF8 --locale=en_US.UTF-8"
      PGDATA: /var/lib/postgresql/data/pgdata

    # Volumes
    volumes:
      # Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ: /var/lib/postgresql/data Ğ²Ğ¼ĞµÑÑ‚Ğ¾ /var/lib/postgresql
      - postgres-dev-data:/var/lib/postgresql/data:z
      - ../../server/migrations:/migrations:ro,z

    # Networking
    networks:
      - internal

    # Health check
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-pressograph_dev}"]
      <<: *healthcheck-defaults
      interval: 10s
      start_period: 30s

    # OCI Labels
    labels:
      <<: *common-labels
      org.opencontainers.image.title: "Pressograph PostgreSQL Database (Dev)"
      org.opencontainers.image.description: "PostgreSQL 18 database for development"
      com.pressograph.service: "database"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Backend API (Node.js with Hot Reload)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  backend:
    image: docker.io/library/node:22-trixie-slim
    container_name: pressograph-dev-backend
    restart: unless-stopped
    working_dir: /app

    # Security context (relaxed Ğ´Ğ»Ñ dev - ÑƒĞ¿Ñ€Ğ¾Ñ‰Ğ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸)
    # user: "node:node"  # ĞÑ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ´Ğ»Ñ dev Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ñ‚ÑŒ permission issues
    <<: *common-security
    cap_add:
      - NET_BIND_SERVICE  # Ğ”Ğ»Ñ binding Ğº Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ¼ > 1024 (Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ Ñ‚ÑƒÑ‚, Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°)

    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.25'
          memory: 256M

    # Logging
    logging: *common-logging

    # Environment variables (Ğ¸Ğ· .env.dev)
    env_file:
      - .env.dev

    environment:
      # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ (Ğ½Ğµ Ğ² .env.dev)
      HOME: /tmp  # Ğ”Ğ»Ñ user: node:node
      npm_config_cache: /app/.npm-cache

    # Volumes
    volumes:
      - ../../server:/app:z
      - backend-dev-node-modules:/app/node_modules:z
      - backend-dev-npm-cache:/app/.npm-cache:z

    # Startup command (Ñ Ğ°Ğ²Ñ‚Ğ¾ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¾Ğ¹ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹)
    command:
      - /bin/sh
      - -c
      - |
        if [ ! -d node_modules ] || [ ! -f node_modules/.installed ]; then
          echo 'ğŸ“¦ Installing backend dependencies...'
          npm install
          touch node_modules/.installed
        fi
        echo 'ğŸš€ Starting backend in development mode with hot reload...'
        npm run dev

    # Networking
    networks:
      - internal
      - traefik-public

    # Dependencies
    depends_on:
      postgres:
        condition: service_healthy
        restart: true

    # Traefik Labels
    labels:
      # OCI Labels
      <<: *common-labels
      org.opencontainers.image.title: "Pressograph Backend API (Dev)"
      org.opencontainers.image.description: "Node.js Express API with hot reload"
      com.pressograph.service: "backend"

      # Traefik routing
      traefik.enable: "true"
      traefik.docker.network: "traefik-public"

      # Backend API on /api with strip prefix
      traefik.http.routers.pressograph-dev-api.entrypoints: "https"
      traefik.http.routers.pressograph-dev-api.rule: "Host(`dev-pressograph.infra4.dev`) && PathPrefix(`/api`)"
      traefik.http.routers.pressograph-dev-api.tls: "true"
      traefik.http.routers.pressograph-dev-api.tls.certresolver: "cloudflare"
      traefik.http.routers.pressograph-dev-api.priority: "100"

      # Apply API gateway middleware (no strip prefix - backend expects full path)
      traefik.http.routers.pressograph-dev-api.middlewares: "api-gateway@file"

      # Service configuration
      traefik.http.services.pressograph-dev-api.loadbalancer.server.port: "3001"
      traefik.http.services.pressograph-dev-api.loadbalancer.server.scheme: "http"

    # Health check (ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½ start_period Ğ´Ğ»Ñ npm install)
    healthcheck:
      test: ["CMD-SHELL", "node -e \"require('http').get('http://localhost:3001/health', (res) => process.exit(res.statusCode === 200 ? 0 : 1)).on('error', () => process.exit(1))\""]
      <<: *healthcheck-defaults
      start_period: 90s

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Frontend (Vite Dev Server with HMR)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  frontend:
    image: docker.io/library/node:22-trixie-slim
    container_name: pressograph-dev-frontend
    restart: unless-stopped
    working_dir: /app

    # Security context (relaxed Ğ´Ğ»Ñ dev - ÑƒĞ¿Ñ€Ğ¾Ñ‰Ğ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸)
    # user: "node:node"  # ĞÑ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ´Ğ»Ñ dev Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ñ‚ÑŒ permission issues
    <<: *common-security
    cap_add:
      - NET_BIND_SERVICE

    # Resource limits (Vite Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ñ‚ÑĞ¶ĞµĞ»Ñ‹Ğ¼ Ğ¿Ñ€Ğ¸ HMR)
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.25'
          memory: 256M

    # Logging
    logging: *common-logging

    # Environment variables
    environment:
      VITE_API_URL: ${VITE_API_URL:-/api}
      NODE_ENV: development
      HOME: /tmp
      npm_config_cache: /app/.npm-cache

    # Volumes
    volumes:
      - ../../:/app:z
      - frontend-dev-node-modules:/app/node_modules:z
      - frontend-dev-npm-cache:/app/.npm-cache:z
      # Read-only server directory (Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¸Ğ·Ğ¼ĞµĞ½ÑÑ‚ÑŒÑÑ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ¾Ğ¼)
      - ../../server:/app/server:ro,z

    # Startup command
    command:
      - /bin/sh
      - -c
      - |
        if [ ! -d node_modules ] || [ ! -f node_modules/.installed ]; then
          echo 'ğŸ“¦ Installing frontend dependencies...'
          npm install
          touch node_modules/.installed
        fi
        echo 'ğŸš€ Starting Vite dev server with hot reload...'
        npm run dev -- --host 0.0.0.0 --port 5173

    # Networking
    networks:
      - traefik-public

    # Dependencies (frontend Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ backend)
    depends_on:
      backend:
        condition: service_healthy

    # Traefik Labels
    labels:
      # OCI Labels
      <<: *common-labels
      org.opencontainers.image.title: "Pressograph Frontend (Dev)"
      org.opencontainers.image.description: "Vite dev server with React HMR"
      com.pressograph.service: "frontend"

      # Traefik routing
      traefik.enable: "true"
      traefik.docker.network: "traefik-public"

      # Frontend on main domain
      traefik.http.routers.pressograph-dev-frontend.entrypoints: "https"
      traefik.http.routers.pressograph-dev-frontend.rule: "Host(`dev-pressograph.infra4.dev`)"
      traefik.http.routers.pressograph-dev-frontend.tls: "true"
      traefik.http.routers.pressograph-dev-frontend.tls.certresolver: "cloudflare"
      traefik.http.routers.pressograph-dev-frontend.priority: "1"
      traefik.http.routers.pressograph-dev-frontend.middlewares: "web-standard@file"

      # Service configuration
      traefik.http.services.pressograph-dev-frontend.loadbalancer.server.port: "5173"
      traefik.http.services.pressograph-dev-frontend.loadbalancer.server.scheme: "http"

    # Health check
    healthcheck:
      test: ["CMD-SHELL", "node -e \"require('http').get('http://localhost:5173', (res) => process.exit(res.statusCode === 200 ? 0 : 1)).on('error', () => process.exit(1))\""]
      <<: *healthcheck-defaults
      start_period: 90s

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Networks
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
networks:
  # External Traefik network (shared with all projects)
  traefik-public:
    external: true
    name: traefik-public

  # Internal network for database (isolated from internet)
  internal:
    driver: bridge
    internal: true  # Explicitly mark as internal
    labels:
      com.pressograph.network.type: "internal"
      com.pressograph.network.environment: "development"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Volumes
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
volumes:
  # PostgreSQL data (persistent)
  postgres-dev-data:
    driver: local
    name: pressograph-dev-postgres-data
    labels:
      com.pressograph.volume.type: "database"
      com.pressograph.volume.backup: "required"

  # Backend node_modules cache (persistent across restarts)
  backend-dev-node-modules:
    driver: local
    name: pressograph-dev-backend-modules
    labels:
      com.pressograph.volume.type: "cache"

  # Backend npm cache
  backend-dev-npm-cache:
    driver: local
    name: pressograph-dev-backend-npm-cache
    labels:
      com.pressograph.volume.type: "cache"

  # Frontend node_modules cache
  frontend-dev-node-modules:
    driver: local
    name: pressograph-dev-frontend-modules
    labels:
      com.pressograph.volume.type: "cache"

  # Frontend npm cache
  frontend-dev-npm-cache:
    driver: local
    name: pressograph-dev-frontend-npm-cache
    labels:
      com.pressograph.volume.type: "cache"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Notes:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1. Resource Limits:
#    - Postgres: 512MB RAM (Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ dev)
#    - Backend: 1GB RAM (Node.js Ñ hot reload)
#    - Frontend: 1GB RAM (Vite HMR Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼)
#
# 2. Security:
#    - Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ñ no-new-privileges
#    - Dropped ALL capabilities, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ
#    - Non-root users (node:node, postgres:postgres)
#    - Internal network Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ¾Ñ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°
#
# 3. Logging:
#    - JSON driver Ñ rotation (max 10MB, 3 Ñ„Ğ°Ğ¹Ğ»Ğ° = 30MB max)
#    - ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ¸ÑĞºĞ° Ğ»Ğ¾Ğ³Ğ°Ğ¼Ğ¸
#
# 4. Healthchecks:
#    - start_period: 90s Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ñ npm install
#    - start_period: 30s Ğ´Ğ»Ñ PostgreSQL
#    - ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ "unhealthy" Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ startup
#
# 5. Volumes:
#    - :z suffix Ğ´Ğ»Ñ SELinux relabeling (Podman rootless)
#    - ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ĞºĞµÑˆĞ¸ Ğ´Ğ»Ñ npm (ÑƒÑĞºĞ¾Ñ€ÑĞµÑ‚ reinstall)
#
# 6. Development Features:
#    - Hot reload Ğ´Ğ»Ñ frontend (Vite HMR)
#    - Hot reload Ğ´Ğ»Ñ backend (nodemon)
#    - Auto npm install Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ
#    - Ğ¥Ğ°Ñ€Ğ´ĞºĞ¾Ğ´ "ÑĞ»Ğ°Ğ±Ñ‹Ñ…" Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼ (Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ´Ğ»Ñ dev!)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
