# Project Cleanup Analysis

**Date:** 2025-10-30
**Project:** Pressograph
**Location:** `/opt/projects/repositories/pressograph`

---

## Executive Summary

This analysis identifies outdated, duplicate, temporary, and unnecessary files in the Pressograph repository. The goal is to improve maintainability, reduce clutter, and ensure the repository contains only relevant, current files.

**Total Space to be Freed:** ~373+ MB
**Files to Delete:** 12 files/directories
**Empty Directories:** 13 directories

---

## Category 1: Build Artifacts (SAFE TO DELETE)

### 1.1 Frontend Build Directory
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/dist/`
- **Size:** 0 bytes (empty)
- **Reason:** Build output directory, should not be in git
- **Action:** DELETE (already in .gitignore)
- **Risk:** None - regenerated by `npm run build`

### 1.2 Backend Build Directory
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/server/dist/`
- **Size:** 556 KB
- **Reason:** TypeScript compiled output, regenerated on build
- **Action:** DELETE (should be in .gitignore)
- **Risk:** None - regenerated by `npm run build` in server/

### 1.3 node_modules (Frontend)
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/node_modules/`
- **Size:** 274 MB
- **Reason:** Dependencies, regenerated from package-lock.json
- **Action:** KEEP (in .gitignore, needed for development)
- **Note:** Already properly ignored by git

### 1.4 node_modules (Backend)
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/server/node_modules/`
- **Size:** 99 MB
- **Reason:** Dependencies, regenerated from package-lock.json
- **Action:** KEEP (in .gitignore, needed for development)
- **Note:** Already properly ignored by git

**Subtotal Build Artifacts to Delete:** 556 KB

---

## Category 2: Temporary Files (SAFE TO DELETE)

### 2.1 Backup Files
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/server/node_modules/console-control-strings/README.md~`
- **Size:** < 1 KB
- **Reason:** Vim/Emacs backup file inside node_modules
- **Action:** DELETE (will be regenerated when node_modules installed)
- **Risk:** None - inside node_modules

### 2.2 NPM Cache Directories
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/.npm-cache/`
- **Size:** 0 bytes (empty)
- **Reason:** Empty NPM cache directory
- **Action:** DELETE
- **Risk:** None

- **Path:** `/opt/projects/repositories/pressure-test-visualizer/server/.npm-cache/`
- **Size:** 0 bytes (empty)
- **Reason:** Empty NPM cache directory
- **Action:** DELETE
- **Risk:** None

**Subtotal Temporary Files:** < 1 KB

---

## Category 3: Outdated Documentation (REVIEW REQUIRED)

### 3.1 TODO.md
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/docs/TODO.md`
- **Size:** 28 KB
- **Lines:** 839 lines
- **Status:** OUTDATED - Superseded by DEVELOPMENT_PLAN.md
- **Created:** Unknown
- **Last Updated:** 2025-10-29 (but content is now outdated)
- **Reason:**
  - Contains old roadmap/sprint structure
  - DEVELOPMENT_PLAN.md (27 KB, 850+ lines) is the official Scrum document
  - Contains completed items marked with âœ… but no longer relevant
  - Mixes priority legends (ðŸ”´ðŸŸ¡ðŸŸ¢) with sprint structure
  - No longer follows Scrum framework
- **Action:** **DELETE** (replace with link to DEVELOPMENT_PLAN.md)
- **Risk:** LOW - All relevant information migrated to DEVELOPMENT_PLAN.md
- **Replacement:** Add reference in README.md pointing to DEVELOPMENT_PLAN.md

### 3.2 Old Docker Compose Files (Legacy)
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/deploy/compose/docker-compose.dev.yml`
- **Size:** 8.5 KB
- **Reason:** Old docker-compose format, replaced by `compose.dev.yaml`
- **Action:** DELETE (superseded by Compose Spec 2025 files)

- **Path:** `/opt/projects/repositories/pressure-test-visualizer/deploy/compose/docker-compose.prod.yml`
- **Size:** 4.6 KB
- **Reason:** Old docker-compose format, replaced by `compose.prod.yaml`
- **Action:** DELETE (superseded by Compose Spec 2025 files)

**Subtotal Outdated Docs:** ~41 KB

---

## Category 4: Empty Directories (SAFE TO DELETE)

### 4.1 Empty Directories List
```
/opt/projects/repositories/pressure-test-visualizer/deploy/grafana/provisioning/dashboards/dashboards
/opt/projects/repositories/pressure-test-visualizer/public
/opt/projects/repositories/pressure-test-visualizer/server/.npm-cache
/opt/projects/repositories/pressure-test-visualizer/server/exports
/opt/projects/repositories/pressure-test-visualizer/docs/user-guide
/opt/projects/repositories/pressure-test-visualizer/docs/admin
/opt/projects/repositories/pressure-test-visualizer/docs/development
/opt/projects/repositories/pressure-test-visualizer/dist
/opt/projects/repositories/pressure-test-visualizer/.npm-cache
/opt/projects/repositories/pressure-test-visualizer/config/grafana
/opt/projects/repositories/pressure-test-visualizer/config/traefik
```

**Analysis:**
- `public/` - May be needed by Vite (keep empty or check vite.config)
- `server/exports/` - Runtime directory for exported files (KEEP)
- `dist/` - Build output (DELETE, in .gitignore)
- `.npm-cache/` - Both instances (DELETE)
- `server/.npm-cache/` - DELETE
- `docs/user-guide/`, `docs/admin/`, `docs/development/` - DELETE (empty placeholders)
- `deploy/grafana/provisioning/dashboards/dashboards` - DELETE (empty)
- `config/grafana/`, `config/traefik/` - DELETE (moved to deploy/)

**Action:** Delete 10 empty directories (except `public/` and `server/exports/`)

---

## Category 5: Kubernetes/Podman Artifacts (REVIEW REQUIRED)

### 5.1 Pods Directory
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/pods/`
- **Subdirs:** `kube-yaml/`, `pressograph-backend/`, `pressograph-db/`, `pressograph-frontend/`, `shared/`
- **Size:** Unknown
- **Reason:** Podman systemd unit files and Kubernetes manifests
- **Status:** UNCLEAR - May be needed for deployment
- **Action:** **REVIEW** - Check if used in production deployment
- **Risk:** MEDIUM - May break systemd deployments

**Recommendation:** Keep for now, verify if used by systemd services in `/root/.config/systemd/user/`

---

## Category 6: Environment Files (KEEP - BUT REVIEW)

### 6.1 Environment Files
```
/opt/projects/repositories/pressure-test-visualizer/.env
/opt/projects/repositories/pressure-test-visualizer/.env.example
/opt/projects/repositories/pressure-test-visualizer/server/.env.example
/opt/projects/repositories/pressure-test-visualizer/deploy/compose/.env
/opt/projects/repositories/pressure-test-visualizer/deploy/compose/.env.dev
/opt/projects/repositories/pressure-test-visualizer/deploy/compose/.env.example
/opt/projects/repositories/pressure-test-visualizer/deploy/compose/.env.observability
/opt/projects/repositories/pressure-test-visualizer/deploy/compose/.env.prod
```

**Status:** KEEP ALL
- `.env` files in root and deploy/compose are active
- `.env.dev` and `.env.observability` are untracked but needed (see git status)
- `.env.example` files are templates (KEEP)

**Note:** `.env.dev` and `.env.observability` are untracked (good - contain secrets)

---

## Category 7: Configuration Patches (REVIEW)

### 7.1 Makefile Patch
- **Path:** `/opt/projects/repositories/pressure-test-visualizer/deploy/compose/Makefile.patch`
- **Size:** 4.9 KB
- **Reason:** Patch file for Makefile modifications
- **Status:** UNCLEAR - May be applied or obsolete
- **Action:** REVIEW - Check if already applied to root Makefile
- **Risk:** LOW - Can be regenerated if needed

---

## Summary of Actions

### DELETE (Safe - Low Risk)
1. `/dist/` (empty build dir)
2. `/server/dist/` (556 KB - compiled TypeScript)
3. `/.npm-cache/` (empty)
4. `/server/.npm-cache/` (empty)
5. `/docs/TODO.md` (28 KB - outdated, superseded by DEVELOPMENT_PLAN.md)
6. `/deploy/compose/docker-compose.dev.yml` (8.5 KB - legacy format)
7. `/deploy/compose/docker-compose.prod.yml` (4.6 KB - legacy format)
8. `/docs/user-guide/` (empty)
9. `/docs/admin/` (empty)
10. `/docs/development/` (empty)
11. `/deploy/grafana/provisioning/dashboards/dashboards/` (empty)
12. `/config/grafana/` (empty)
13. `/config/traefik/` (empty)

**Total Space Freed:** ~597 KB + empty directories

### KEEP
1. All `node_modules/` (in .gitignore, needed for development)
2. `/server/exports/` (runtime directory for exports - empty but needed)
3. `/public/` (may be used by Vite)
4. All `.env.example` files (templates)
5. Active `.env`, `.env.dev`, `.env.prod`, `.env.observability` files

### REVIEW BEFORE ACTION
1. `/pods/` directory (check if used by systemd)
2. `/deploy/compose/Makefile.patch` (check if applied)

---

## Recommended Cleanup Commands

### Phase 1: Safe Deletions (Execute Immediately)

```bash
cd /opt/projects/repositories/pressure-test-visualizer

# Delete build artifacts
rm -rf dist/
rm -rf server/dist/

# Delete npm cache directories
rm -rf .npm-cache/
rm -rf server/.npm-cache/

# Delete outdated documentation
rm docs/TODO.md

# Delete legacy docker-compose files
rm deploy/compose/docker-compose.dev.yml
rm deploy/compose/docker-compose.prod.yml

# Delete empty documentation directories
rmdir docs/user-guide/ docs/admin/ docs/development/ 2>/dev/null

# Delete empty config directories
rm -rf config/grafana/ config/traefik/

# Delete empty grafana dashboards directory
rmdir deploy/grafana/provisioning/dashboards/dashboards/ 2>/dev/null
```

### Phase 2: Review and Decide

```bash
# Check if pods/ is used by systemd
systemctl --user list-units | grep pressograph
ls -la /root/.config/systemd/user/*.service | grep -i pressograph

# If not used, delete:
# rm -rf pods/

# Check if Makefile.patch is already applied
diff deploy/compose/Makefile.patch Makefile
# If applied, delete:
# rm deploy/compose/Makefile.patch
```

---

## Impact Assessment

### After Cleanup:
- Repository cleaner and more maintainable
- Faster git operations (less clutter)
- Clear documentation hierarchy (DEVELOPMENT_PLAN.md is source of truth)
- Modern compose files only (no legacy yml files)
- ~597 KB freed immediately
- Potentially more if pods/ can be removed

### Risks:
- **None for Phase 1** (all safely regenerable or outdated)
- **Low for Phase 2** (review before deletion)

---

## Post-Cleanup Actions

1. **Update .gitignore** to ensure build artifacts stay ignored:
   ```gitignore
   # Build outputs
   dist/
   server/dist/

   # Caches
   .npm-cache/
   server/.npm-cache/
   ```

2. **Update README.md** to reference new documentation structure:
   ```markdown
   ## Documentation

   - [Development Plan](./DEVELOPMENT_PLAN.md) - Sprint roadmap and task tracking
   - [API Documentation](./docs/API_DESIGN.md)
   - [Changelog](./CHANGELOG.md)
   ```

3. **Commit cleanup** with message:
   ```
   chore: remove outdated files and clean up repository

   - Remove outdated docs/TODO.md (superseded by DEVELOPMENT_PLAN.md)
   - Remove legacy docker-compose.yml files
   - Remove empty directories and build artifacts
   - Clean up npm cache directories

   Space freed: ~597 KB
   ```

---

## Approval Required

Before executing Phase 1 cleanup, please confirm:
- [ ] Agree to delete `docs/TODO.md` (content migrated to DEVELOPMENT_PLAN.md)
- [ ] Agree to delete legacy `docker-compose.dev.yml` and `docker-compose.prod.yml`
- [ ] Agree to delete empty directories
- [ ] Agree to delete build artifacts (`dist/`, `server/dist/`)

**Recommendation:** PROCEED with Phase 1. Review Phase 2 separately.
