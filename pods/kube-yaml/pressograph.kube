# Quadlet Kube Unit for Pressograph
# Location: /etc/containers/systemd/pressograph.kube
#
# This file tells Quadlet to run a Kubernetes YAML file with Podman
# See: https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html
#
# Installation:
#   sudo mkdir -p /etc/containers/systemd
#   sudo cp pressograph.kube /etc/containers/systemd/
#   sudo cp pressograph.yaml /etc/containers/systemd/
#   sudo systemctl daemon-reload
#   sudo systemctl start pressograph.service

[Unit]
Description=Pressograph - Pressure Test Visualization Platform
Documentation=https://github.com/dantte-lp/pressograph
After=network-online.target
Wants=network-online.target

[Kube]
# Path to Kubernetes YAML file
Yaml=/etc/containers/systemd/pressograph.yaml

# Set log driver
LogDriver=journald

# Pull policy for images
# Options: always, missing, never, newer
PullPolicy=never

# Network mode
Network=pressograph-net

[Service]
# Restart policy
Restart=always
RestartSec=10s

# Timeout for start/stop operations
TimeoutStartSec=300
TimeoutStopSec=60

# Resource limits (systemd level)
# Uncomment to set resource limits
# CPUQuota=200%
# MemoryMax=2G
# MemoryHigh=1.5G

[Install]
WantedBy=multi-user.target default.target
