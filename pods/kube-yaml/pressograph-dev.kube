# Quadlet Kube Unit for Pressograph Development Environment
# Location: /etc/containers/systemd/pressograph-dev.kube
#
# This file tells Quadlet to run a Kubernetes YAML file with Podman for development
# See: https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html
#
# Installation:
#   sudo mkdir -p /etc/containers/systemd
#   sudo cp pressograph-dev.kube /etc/containers/systemd/
#   sudo cp pressograph-dev.yaml /etc/containers/systemd/
#   sudo systemctl daemon-reload
#   sudo systemctl start pressograph-dev.service
#
# Note: Development environment with hot reload for frontend and backend

[Unit]
Description=Pressograph Development - Pressure Test Visualization Platform (Dev)
Documentation=https://github.com/dantte-lp/pressograph
After=network-online.target
Wants=network-online.target

[Kube]
# Path to Kubernetes YAML file
Yaml=/etc/containers/systemd/pressograph-dev.yaml

# Set log driver
LogDriver=journald

# Pull policy for images
# Options: always, missing, never, newer
PullPolicy=missing

# Network mode - use traefik-public for Traefik integration
Network=traefik-public

# Publish services with labels for Traefik
PublishPort=5174:5173

[Service]
# Restart policy
Restart=always
RestartSec=10s

# Timeout for start/stop operations (longer for dev due to npm install)
TimeoutStartSec=600
TimeoutStopSec=60

# Resource limits (systemd level)
# Development may need more resources for hot reload
# Uncomment to set resource limits
# CPUQuota=300%
# MemoryMax=4G
# MemoryHigh=3G

[Install]
WantedBy=multi-user.target default.target
